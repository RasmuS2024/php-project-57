<?php

namespace Database\Seeders;

use Illuminate\Database\Seeder;
use Illuminate\Support\Facades\DB;

class TaskSeeder extends Seeder
{
    /**
     * Run the database seeds.
     *
     * @return void
     */
    public function run()
    {
        $tasks = [
            'Исправить ошибку в какой-нибудь строке',
            'Допилить дизайн главной страницы',
            'Отрефакторить авторизацию',
            'Доработать команду подготовки БД',
            'Пофиксить вон ту кнопку',
            'Исправить поиск',
            'Добавить интеграцию с облаками',
            'Выпилить лишние зависимости',
            'Запилить сертификаты',
            'Выпилить игру престолов',
            'Пофиксить спеку во всех репозиториях',
            'Вернуть крошки',
            'Установить Linux',
            'Потребовать прибавки к зарплате',
            'Добавить поиск по фото',
            'Оптимизировать запросы к базе данных',
            'Реализовать кэширование страниц',
            'Обновить документацию API',
            'Добавить тесты для нового функционала',
            'Исправить баг с кодировкой',
            'Добавить поддержку темной темы',
            'Реализовать экспорт данных в CSV',
            'Улучшить обработку ошибок',
            'Добавить лоадер для тяжелых операций',
            'Рефакторинг модуля оплаты',
            'Интегрировать Sentry для мониторинга ошибок',
            'Добавить двухфакторную аутентификацию',
            'Оптимизировать сборку фронтенда',
            'Удалить устаревший код',
            'Добавить фильтрацию в таблицы',
            'Реализовать бесконечный скролл',
            'Исправить отображение на мобильных устройствах',
            'Добавить подтверждение по email',
            'Обновить зависимости проекта',
            'Реализовать восстановление пароля',
            'Добавить систему уведомлений',
            'Создать API для мобильного приложения',
            'Оптимизировать изображения',
            'Добавить пагинацию',
            'Реализовать drag-and-drop интерфейс',
            'Исправить баг с часовыми поясами',
            'Добавить статистику использования',
            'Реализовать превью PDF',
            'Добавить поддержку Markdown',
            'Оптимизировать производительность SQL-запросов',
            'Добавить мультиязычность',
            'Реализовать импорт данных из Excel',
            'Добавить систему рейтингов',
            'Исправить баг с кэшированием',
            'Добавить чат поддержки',
            'Реализовать подписку по email',
            'Добавить систему купонов',
            'Оптимизировать работу с памятью'
        ];

        foreach ($tasks as $taskName) {
            DB::table('tasks')->insert([
                'name' => $taskName,
                'description' => $this->generateDescription(),
                'status_id' => rand(1, 4),
                'created_by_id' => rand(1, 10),
                'assigned_to_id' => rand(1, 10) > 3 ? rand(2, 10) : null,
                'created_at' => now(),
                'updated_at' => now(),
            ]);
        }
    }

    private function generateDescription()
    {
        $descriptions = [
            'Важная задача, требующая немедленного решения.',
            'Необходимо выполнить в ближайшее время.',
            'Задача средней приоритетности.',
            'Можно отложить на потом.',
            'Критический баг, влияющий на работу системы.',
            'Улучшение пользовательского опыта.',
            'Технический долг, который нужно закрыть.',
            'Новый функционал, запрошенный клиентом.',
            'Оптимизация существующего кода.',
            'Подготовка к следующему релизу.',
            null
        ];

        return $descriptions[array_rand($descriptions)];
    }
}
